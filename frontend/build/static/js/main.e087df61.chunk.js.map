{"version":3,"sources":["images/logo.svg","components/Header.jsx","components/Register.jsx","components/InfoTooltip.jsx","components/ProtectedRoute.jsx","components/Login.jsx","contexts/CurrentUserContext.js","components/Card.jsx","components/Main.jsx","components/Footer.jsx","components/PopupWithForm.jsx","components/ImagePopup.jsx","hooks/useForm.js","components/EditProfilePopup.jsx","components/EditAvatarPopup.jsx","components/AddPlacePopup.jsx","utils/constants.js","utils/api.js","utils/auth.js","components/App.jsx","reportWebVitals.js","index.jsx"],"names":["Header","handleClick","buttonName","loggedIn","email","useState","isMenuOpen","setMenuOpen","isMain","useRouteMatch","path","exact","className","src","logo","alt","type","onClick","defaultProps","undefined","Register","handleRegister","handleSignIn","password","data","setData","handleChange","e","target","name","value","onSubmit","preventDefault","id","placeholder","onChange","required","autoComplete","to","InfoTooltip","isOpen","onClose","message","text","ProtectedRoute","Component","component","props","Login","handleLogin","handleSignUp","CurrentUserContext","React","createContext","Card","owner","likes","link","onCardClick","onCardDelete","onCardLike","currentUser","useContext","isOwn","_id","cardDeleteButtonClassName","isLiked","some","i","cardLikeButtonClassName","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","handleLogout","avatar","about","map","card","Footer","Date","getFullYear","PopupWithForm","title","children","submitButtonTitle","isDisabled","useEffect","handleEscapeClose","event","key","document","addEventListener","removeEventListener","onMouseDown","currentTarget","disabled","ImagePopup","useFormWithValidation","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","useCallback","newValues","newErrors","newIsValid","evt","input","validationMessage","closest","checkValidity","EditProfilePopup","onUpdateUser","isSending","minLength","maxLength","EditAvatarPopup","onUpdateAvatar","AddPlacePopup","reqOptions","baseUrl","headers","Accept","api","options","_parseResponse","res","ok","json","Promise","reject","Error","status","this","_url","_headers","fetch","credentials","then","method","body","JSON","stringify","inputData","auth","_checkResponse","response","register","logout","App","setCurrentUser","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isRemoveCardPopupOpen","setIsRemoveCardPopupOpen","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","selectedCard","setSelectedCard","isImagePopupOpen","setIsImagePopupOpen","setLoggedIn","userData","setUserData","setMessage","isCardSending","setIsCardSending","cardForDelete","setCardForDelete","setCards","history","useHistory","handleError","error","console","push","getUserInfo","user","catch","err","log","getInitialCards","reverse","closeAllPopups","isUserSending","setIsUserSending","Provider","userEmail","authorize","deleteLike","addLike","newCard","state","c","newProfileData","setUserInfo","finally","addNewCard","allCards","setUserAvatar","handleDeleteCard","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e087df61.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.5f3664ca.svg\";","/* eslint-disable jsx-a11y/control-has-associated-label */\r\nimport { React, useState } from 'react';\r\nimport { useRouteMatch } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport logo from '../images/logo.svg';\r\n\r\nfunction Header({\r\n  handleClick, buttonName, loggedIn, email,\r\n}) {\r\n  const [isMenuOpen, setMenuOpen] = useState(false);\r\n\r\n  function toggleMenu() {\r\n    setMenuOpen(!isMenuOpen);\r\n  }\r\n\r\n  const isMain = useRouteMatch({ path: '/', exact: true });\r\n\r\n  return (\r\n    <header\r\n      className={`header page__header\r\n         ${isMenuOpen ? 'header_menu-open' : ''}\r\n         ${isMain ? 'header_page-main' : ''}`}\r\n    >\r\n\r\n      <img src={logo} alt=\"Логотип Место Россия\" className=\"header__logo\" />\r\n      {loggedIn ? (\r\n        <>\r\n          <button type=\"button\" onClick={toggleMenu} className=\"button header__menu\" />\r\n          <div className=\"header__container\">\r\n            <p className=\"header__email\">{email}</p>\r\n            <button type=\"button\" onClick={handleClick} className=\"button header__button\">\r\n              {buttonName}\r\n            </button>\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <button type=\"button\" onClick={handleClick} className=\"button header__button\">\r\n          {buttonName}\r\n        </button>\r\n      )}\r\n    </header>\r\n  );\r\n}\r\n\r\nHeader.propTypes = {\r\n  handleClick: PropTypes.func.isRequired,\r\n  buttonName: PropTypes.string.isRequired,\r\n  loggedIn: PropTypes.bool,\r\n  // eslint-disable-next-line react/require-default-props\r\n  email: PropTypes.string,\r\n};\r\n\r\nHeader.defaultProps = {\r\n  loggedIn: undefined,\r\n};\r\n\r\nexport default Header;\r\n","import { Link } from 'react-router-dom';\r\nimport { useState, React } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Header from './Header';\r\n\r\nconst Register = ({ handleRegister, loggedIn, handleSignIn }) => {\r\n  const [data, setData] = useState({\r\n    password: '',\r\n    email: '',\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setData({\r\n      ...data,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { password, email } = data;\r\n    handleRegister({ password, email });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header\r\n        handleClick={handleSignIn}\r\n        buttonName=\"Войти\"\r\n        loggedIn={loggedIn}\r\n      />\r\n      <div className=\"register page__register\">\r\n        <h2 className=\"register__title\">Регистрация</h2>\r\n        <form className=\"register__form\" onSubmit={handleSubmit}>\r\n          <input\r\n            className=\"register__input\"\r\n            id=\"email\"\r\n            name=\"email\"\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            onChange={handleChange}\r\n            value={data.email || ''}\r\n            required\r\n          />\r\n          <input\r\n            className=\"register__input\"\r\n            id=\"password\"\r\n            name=\"password\"\r\n            type=\"password\"\r\n            placeholder=\"Пароль\"\r\n            onChange={handleChange}\r\n            value={data.password || ''}\r\n            autoComplete=\"on\"\r\n            required\r\n          />\r\n          <button className=\"button register__button\" type=\"submit\">\r\n            Зарегистрироваться\r\n          </button>\r\n          <div className=\"register__signin\">\r\n            <p>Уже зарегистрированы?</p>\r\n            <Link to=\"login\" className=\"register__login-link\">\r\n              Войти\r\n            </Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nRegister.propTypes = {\r\n  handleRegister: PropTypes.func.isRequired,\r\n  loggedIn: PropTypes.bool.isRequired,\r\n  handleSignIn: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Register;\r\n","/* eslint-disable jsx-a11y/control-has-associated-label */\r\nimport { React } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction InfoTooltip({ isOpen, onClose, message }) {\r\n  return (\r\n    <section className={`popup ${isOpen && 'popup_opened'}`}>\r\n      <div className=\"popup__container\">\r\n        <div\r\n          className={`popup__tooltip-icon popup__tooltip-icon_type_${message.type}`}\r\n        />\r\n        <h2 className=\"popup__title popup__title_padding-bottom_min popup__title_align_center\">\r\n          {message.text}\r\n        </h2>\r\n        <button\r\n          onClick={onClose}\r\n          className=\"button button_type_close\"\r\n          type=\"button\"\r\n        />\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nInfoTooltip.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n  // eslint-disable-next-line react/forbid-prop-types\r\n  message: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default InfoTooltip;\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\n/* eslint-disable react/prop-types */\r\nimport React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => (\r\n  <Route>\r\n    {() => (props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />)}\r\n  </Route>\r\n);\r\n\r\nexport default ProtectedRoute;\r\n","import { useState, React } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Header from './Header';\r\n\r\nconst Login = ({ handleLogin, handleSignUp }) => {\r\n  const [data, setData] = useState({\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setData({\r\n      ...data,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!data.email || !data.password) {\r\n      return;\r\n    }\r\n    const { password, email } = data;\r\n    handleLogin({ password, email });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header handleClick={handleSignUp} buttonName=\"Регистрация\" />\r\n      <div className=\"register page__register\">\r\n        <h2 className=\"register__title\">Вход</h2>\r\n        <form className=\"register__form\" onSubmit={handleSubmit}>\r\n          <input\r\n            className=\"register__input\"\r\n            id=\"email\"\r\n            name=\"email\"\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            value={data.email || ''}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n          <input\r\n            className=\"register__input\"\r\n            id=\"password\"\r\n            name=\"password\"\r\n            type=\"password\"\r\n            placeholder=\"Пароль\"\r\n            value={data.password || ''}\r\n            onChange={handleChange}\r\n            autoComplete=\"on\"\r\n            required\r\n          />\r\n          <button className=\"button register__button\" type=\"submit\">\r\n            Войти\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nLogin.propTypes = {\r\n  handleLogin: PropTypes.func.isRequired,\r\n  handleSignUp: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Login;\r\n","import React from 'react';\r\n\r\nconst CurrentUserContext = React.createContext();\r\nexport default CurrentUserContext;\r\n","/* eslint-disable jsx-a11y/control-has-associated-label */\r\n/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\r\n/* eslint-disable jsx-a11y/click-events-have-key-events */\r\nimport { useContext, React } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n  const {\r\n    owner, likes, link, name, onCardClick, onCardDelete, onCardLike,\r\n  } = props;\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const isOwn = owner === currentUser._id;\r\n\r\n  const cardDeleteButtonClassName = `button ${\r\n    isOwn ? 'button_type_delete-card' : 'button_type_delete-card_disable'\r\n  }`;\r\n\r\n  const isLiked = likes.some((i) => i === currentUser._id);\r\n\r\n  const cardLikeButtonClassName = `button ${\r\n    isLiked ? 'button_type_like_active' : 'button_type_like'\r\n  }`;\r\n\r\n  function handleClick() {\r\n    onCardClick(props);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(props);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(props);\r\n  }\r\n\r\n  return (\r\n    <li className=\"element\">\r\n      <img\r\n        src={link}\r\n        alt={name}\r\n        className=\"element__image\"\r\n        onClick={handleClick}\r\n      />\r\n      <h3 className=\"element__title\">{name}</h3>\r\n      <button\r\n        className={cardLikeButtonClassName}\r\n        type=\"button\"\r\n        onClick={handleLikeClick}\r\n      />\r\n      <h3 className=\"element__likes\">{likes.length}</h3>\r\n      <button\r\n        className={cardDeleteButtonClassName}\r\n        type=\"button\"\r\n        onClick={handleDeleteClick}\r\n      />\r\n    </li>\r\n  );\r\n}\r\n\r\nCard.propTypes = {\r\n  owner: PropTypes.string.isRequired,\r\n  likes: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n  link: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  onCardClick: PropTypes.func.isRequired,\r\n  onCardDelete: PropTypes.func.isRequired,\r\n  onCardLike: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Card;\r\n","/* eslint-disable jsx-a11y/control-has-associated-label */\r\nimport { useContext, React } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Card from './Card';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\nimport Header from './Header';\r\n\r\nfunction Main({\r\n  onEditProfile,\r\n  onAddPlace,\r\n  onEditAvatar,\r\n  onCardClick,\r\n  cards,\r\n  onCardLike,\r\n  onCardDelete,\r\n  handleLogout,\r\n  loggedIn,\r\n  email,\r\n}) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <>\r\n      <Header\r\n        handleClick={handleLogout}\r\n        buttonName=\"Выйти\"\r\n        loggedIn={loggedIn}\r\n        email={email}\r\n      />\r\n      <main className=\"content page__content\">\r\n        <section className=\"profile\">\r\n          <div className=\"profile__avatar-container\">\r\n            <img\r\n              className=\"profile__avatar\"\r\n              src={currentUser.avatar}\r\n              alt=\"Аватар пользователя\"\r\n            />\r\n            <button\r\n              onClick={onEditAvatar}\r\n              className=\"button button_type_edit-avatar\"\r\n              type=\"button\"\r\n            />\r\n          </div>\r\n          <div className=\"profile__info\">\r\n            <div className=\"profile__name-section\">\r\n              <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n              <button\r\n                onClick={onEditProfile}\r\n                className=\"button button_type_edit-profile\"\r\n                type=\"button\"\r\n              />\r\n            </div>\r\n            <h2 className=\"profile__description\">{currentUser.about}</h2>\r\n          </div>\r\n          <button\r\n            onClick={onAddPlace}\r\n            className=\"button button_type_add-card\"\r\n            type=\"button\"\r\n          />\r\n        </section>\r\n        <section className=\"elements\">\r\n          <ul className=\"elements__list\">\r\n            {\r\n              cards.map((card) => (\r\n                <Card\r\n                  key={card._id}\r\n                  // eslint-disable-next-line react/jsx-props-no-spreading\r\n                  {...card}\r\n                  onCardClick={onCardClick}\r\n                  onCardLike={onCardLike}\r\n                  onCardDelete={onCardDelete}\r\n                />\r\n              ))\r\n            }\r\n          </ul>\r\n        </section>\r\n      </main>\r\n    </>\r\n  );\r\n}\r\n\r\nMain.propTypes = {\r\n  onEditProfile: PropTypes.func.isRequired,\r\n  onAddPlace: PropTypes.func.isRequired,\r\n  onEditAvatar: PropTypes.func.isRequired,\r\n  onCardClick: PropTypes.func.isRequired,\r\n  cards: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n  onCardLike: PropTypes.func.isRequired,\r\n  onCardDelete: PropTypes.func.isRequired,\r\n  handleLogout: PropTypes.func.isRequired,\r\n  loggedIn: PropTypes.bool.isRequired,\r\n  email: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Main;\r\n","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer page__footer\">\r\n      <p className=\"footer__copyright\">\r\n        &copy;\r\n        {new Date().getFullYear()}\r\n        {' '}\r\n        Mesto Russia\r\n      </p>\r\n    </footer>\r\n  );\r\n}\r\nexport default Footer;\r\n","import React, { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction PopupWithForm({\r\n  name,\r\n  title,\r\n  children,\r\n  submitButtonTitle,\r\n  isOpen,\r\n  onClose,\r\n  onSubmit,\r\n  isDisabled = false,\r\n}) {\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    const handleEscapeClose = (event) => {\r\n      if (event.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n    document.addEventListener('keydown', handleEscapeClose);\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscapeClose);\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  const handleOverlayClose = (event) => {\r\n    if (event.target === event.currentTarget && isOpen) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    // eslint-disable-next-line jsx-a11y/no-static-element-interactions\r\n    <section\r\n      className={`popup ${isOpen && 'popup_opened'}`}\r\n      onMouseDown={handleOverlayClose}\r\n    >\r\n      <form\r\n        className=\"popup__container\"\r\n        name={name}\r\n        onSubmit={onSubmit}\r\n      >\r\n        <h2 className=\"popup__title\">{title}</h2>\r\n        <>{children}</>\r\n        <button\r\n          onClick={onClose}\r\n          className=\"button button_type_close\"\r\n          type=\"button\"\r\n          aria-label=\"Close\"\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          className={`button popup__save-button ${\r\n            isDisabled && 'popup__save-button_disabled'\r\n          }`}\r\n          disabled={isDisabled}\r\n        >\r\n          {submitButtonTitle}\r\n        </button>\r\n      </form>\r\n    </section>\r\n  );\r\n}\r\n\r\nPopupWithForm.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  title: PropTypes.string.isRequired,\r\n  // eslint-disable-next-line react/forbid-prop-types\r\n  children: PropTypes.array,\r\n  submitButtonTitle: PropTypes.string.isRequired,\r\n  isOpen: PropTypes.bool.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n  onSubmit: PropTypes.func,\r\n  isDisabled: PropTypes.bool,\r\n};\r\n\r\nPopupWithForm.defaultProps = {\r\n  children: undefined,\r\n  onSubmit: undefined,\r\n  isDisabled: undefined,\r\n};\r\n\r\nexport default PopupWithForm;\r\n","/* eslint-disable jsx-a11y/control-has-associated-label */\r\nimport { React, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction ImagePopup({ card, onClose, isOpen }) {\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    const handleEscapeClose = (event) => {\r\n      if (event.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n    document.addEventListener('keydown', handleEscapeClose);\r\n    // eslint-disable-next-line consistent-return\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscapeClose);\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  const handleOverlayClose = (event) => {\r\n    if (event.target === event.currentTarget && isOpen) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    // eslint-disable-next-line jsx-a11y/no-static-element-interactions\r\n    <section\r\n      className={`popup popup_type_view ${isOpen && 'popup_opened'}`}\r\n      onMouseDown={handleOverlayClose}\r\n    >\r\n      <div className=\"popup__view\">\r\n        <img\r\n          src={card.link}\r\n          alt={`увеличенное изображение ${card.name}`}\r\n          className=\"popup__image\"\r\n        />\r\n        <h3 className=\"popup__image-title\">{card.name}</h3>\r\n        <button\r\n          onClick={onClose}\r\n          className=\"button button_type_close\"\r\n          type=\"button\"\r\n        />\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nImagePopup.propTypes = {\r\n  card: PropTypes.shape({\r\n    name: PropTypes.string,\r\n    link: PropTypes.string,\r\n  }).isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n  isOpen: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default ImagePopup;\r\n","import { useCallback, useState } from 'react';\r\n\r\nexport function useForm() {\r\n  const [values, setValues] = useState({});\r\n\r\n  const handleChange = (evt) => {\r\n    const input = evt.target;\r\n    const { value } = input;\r\n    const { name } = input;\r\n    setValues({ ...values, [name]: value });\r\n  };\r\n\r\n  return { values, handleChange, setValues };\r\n}\r\n\r\nexport function useFormWithValidation() {\r\n  const [values, setValues] = useState({});\r\n  const [errors, setErrors] = useState({});\r\n  const [isValid, setIsValid] = useState(false);\r\n\r\n  const handleChange = (evt) => {\r\n    const input = evt.target;\r\n    const { value } = input;\r\n    const { name } = input;\r\n    setValues({ ...values, [name]: value });\r\n    setErrors({ ...errors, [name]: input.validationMessage });\r\n    setIsValid(input.closest('form').checkValidity());\r\n  };\r\n\r\n  const resetForm = useCallback(\r\n    (newValues = {}, newErrors = {}, newIsValid = false) => {\r\n      setValues(newValues);\r\n      setErrors(newErrors);\r\n      setIsValid(newIsValid);\r\n    },\r\n    [setValues, setErrors, setIsValid],\r\n  );\r\n\r\n  return {\r\n    values, handleChange, resetForm, errors, isValid,\r\n  };\r\n}\r\n","import React, {\r\n  useContext, useEffect,\r\n} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { useFormWithValidation } from '../hooks/useForm';\r\n\r\nfunction EditProfilePopup({\r\n  isOpen, onClose, onUpdateUser, isSending,\r\n}) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const {\r\n    values, handleChange, resetForm, errors, isValid,\r\n  } = useFormWithValidation();\r\n\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      resetForm(currentUser, {}, true);\r\n    }\r\n  }, [currentUser, resetForm]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateUser({ name: values.name, about: values.about });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Редактировать профиль\"\r\n      name=\"edit-profile\"\r\n      submitButtonTitle={isSending ? 'Сохранение...' : 'Сохранить'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isDisabled={!isValid || isSending}\r\n    >\r\n      <input\r\n        className=\"popup__input\"\r\n        onChange={handleChange}\r\n        id=\"profile-name\"\r\n        name=\"name\"\r\n        type=\"text\"\r\n        value={values.name || ''}\r\n        minLength=\"2\"\r\n        maxLength=\"40\"\r\n        required\r\n      />\r\n      <span className=\"popup__input-error\" id=\"profile-name-error\">{errors.name || ''}</span>\r\n      <input\r\n        className=\"popup__input\"\r\n        onChange={handleChange}\r\n        id=\"description\"\r\n        name=\"about\"\r\n        type=\"text\"\r\n        value={values.about || ''}\r\n        minLength=\"2\"\r\n        maxLength=\"200\"\r\n        required\r\n      />\r\n      <span className=\"popup__input-error\" id=\"profile-description-error\">\r\n        {errors.about || ''}\r\n      </span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nEditProfilePopup.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n  onUpdateUser: PropTypes.func.isRequired,\r\n  isSending: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default EditProfilePopup;\r\n","import { useEffect, React } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { useFormWithValidation } from '../hooks/useForm';\r\n\r\nfunction EditAvatarPopup({\r\n  isOpen, onClose, onUpdateAvatar, isSending,\r\n}) {\r\n  const {\r\n    values, handleChange, resetForm, errors, isValid,\r\n  } = useFormWithValidation();\r\n\r\n  useEffect(() => {\r\n    resetForm({});\r\n  }, [isOpen, resetForm]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateAvatar(values.avatar);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Обновить аватар\"\r\n      name=\"edit-avatar\"\r\n      submitButtonTitle={isSending ? 'Сохранение...' : 'Сохранить'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isDisabled={!isValid || isSending}\r\n    >\r\n      <input\r\n        className=\"popup__input\"\r\n        onChange={handleChange}\r\n        id=\"avatar-link\"\r\n        name=\"avatar\"\r\n        type=\"url\"\r\n        placeholder=\"Ссылка на картинку\"\r\n        required\r\n      />\r\n      <span className=\"popup__input-error\" id=\"avatar-link-error\">{errors.avatar || ''}</span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nEditAvatarPopup.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n  onUpdateAvatar: PropTypes.func.isRequired,\r\n  isSending: PropTypes.bool,\r\n};\r\n\r\nEditAvatarPopup.defaultProps = {\r\n  isSending: undefined,\r\n};\r\n\r\nexport default EditAvatarPopup;\r\n","import { useEffect, React } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { useFormWithValidation } from '../hooks/useForm';\r\n\r\nfunction AddPlacePopup({\r\n  isOpen, onClose, onAddPlace, isSending,\r\n}) {\r\n  const {\r\n    values, handleChange, resetForm, errors, isValid,\r\n  } = useFormWithValidation();\r\n\r\n  useEffect(() => {\r\n    resetForm();\r\n  }, [isOpen, resetForm]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onAddPlace(values);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Новое место\"\r\n      name=\"add-place\"\r\n      submitButtonTitle={isSending ? 'Сохранение...' : 'Сохранить'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isDisabled={!isValid || isSending}\r\n    >\r\n      <input\r\n        className=\"popup__input\"\r\n        id=\"image-name\"\r\n        name=\"name\"\r\n        type=\"text\"\r\n        onChange={handleChange}\r\n        value={values.name || ''}\r\n        placeholder=\"Название\"\r\n        minLength=\"2\"\r\n        maxLength=\"30\"\r\n        required\r\n      />\r\n      <span className=\"popup__input-error\" id=\"image-name-error\">{errors.name || ''}</span>\r\n      <input\r\n        className=\"popup__input\"\r\n        id=\"image-link\"\r\n        name=\"link\"\r\n        type=\"url\"\r\n        onChange={handleChange}\r\n        value={values.link || ''}\r\n        placeholder=\"Ссылка на картинку\"\r\n        required\r\n      />\r\n      <span className=\"popup__input-error\" id=\"image-link-error\">{errors.link || ''}</span>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nAddPlacePopup.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n  onAddPlace: PropTypes.func.isRequired,\r\n  isSending: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default AddPlacePopup;\r\n","const reqOptions = {\r\n  baseUrl: 'https://api.puolukka.nomoredomains.space',\r\n  // baseUrl: 'http://localhost:5000',\r\n  headers: {\r\n    Accept: 'application/json',\r\n    'Content-Type': 'application/json',\r\n  },\r\n};\r\n\r\nexport default reqOptions;\r\n","import reqOptions from './constants';\r\n\r\nclass Api {\r\n  constructor(options) {\r\n    this._url = options.baseUrl;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  _parseResponse = (res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(new Error(`Ошибка: ${res.status}`));\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._url}/users/me`, {\r\n      headers: this._headers,\r\n      credentials: 'include',\r\n    })\r\n      .then((res) => this._parseResponse(res));\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._url}/cards`, {\r\n      headers: this._headers,\r\n      credentials: 'include',\r\n    })\r\n      .then((res) => this._parseResponse(res));\r\n  }\r\n\r\n  setUserInfo(data) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'PATCH',\r\n      credentials: 'include',\r\n      headers: this._headers,\r\n      // в теле — JSON с двумя свойствами — name и about.\r\n      // Значениями этих свойств должны быть обновлённые данные пользователя\r\n      body: JSON.stringify(data),\r\n    })\r\n      .then((res) => this._parseResponse(res));\r\n  }\r\n\r\n  addNewCard(inputData) {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: 'POST',\r\n      credentials: 'include',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: inputData.name,\r\n        link: inputData.link,\r\n      }),\r\n    })\r\n      .then((res) => this._parseResponse(res));\r\n  }\r\n\r\n  getCardLikes() {\r\n    return fetch(`${this._url}/cards`, {\r\n      headers: this._headers,\r\n      credentials: 'include',\r\n      body: JSON.stringify({\r\n        likes: [],\r\n      }),\r\n    })\r\n      .then((res) => this._parseResponse(res));\r\n  }\r\n\r\n  handleDeleteCard(id) {\r\n    // Вместо cardId в URL нужно подставить свойство _id соответствующей карточки.\r\n    return fetch(`${this._url}/cards/${id}`, {\r\n      headers: this._headers,\r\n      method: 'DELETE',\r\n      credentials: 'include',\r\n    })\r\n      .then((res) => this._parseResponse(res));\r\n  }\r\n\r\n  addLike(id) {\r\n    // Вместо cardId в URL нужно подставить свойство _id соответствующей карточки.\r\n    return fetch(`${this._url}/cards/likes/${id}`, {\r\n      headers: this._headers,\r\n      method: 'PUT',\r\n      credentials: 'include',\r\n    })\r\n      .then((res) => this._parseResponse(res));\r\n  }\r\n\r\n  deleteLike(id) {\r\n    return fetch(`${this._url}/cards/likes/${id}`, {\r\n      headers: this._headers,\r\n      method: 'DELETE',\r\n      credentials: 'include',\r\n    })\r\n      .then((res) => this._parseResponse(res));\r\n  }\r\n\r\n  setUserAvatar(link) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n      headers: this._headers,\r\n      method: 'PATCH',\r\n      credentials: 'include',\r\n      body: JSON.stringify({\r\n        avatar: `${link}`,\r\n      }),\r\n    })\r\n      .then((res) => this._parseResponse(res));\r\n  }\r\n}\r\n\r\nconst api = new Api(reqOptions);\r\n\r\nexport default api;\r\n","import reqOptions from './constants';\r\n\r\nclass Auth {\r\n  constructor(options) {\r\n    this._url = options.baseUrl;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  _checkResponse = (response) => (response.ok\r\n    ? response.json()\r\n    : Promise.reject(new Error(`Ошибка: ${response.status}`)));\r\n\r\n  register = (password, email) => fetch(`${this._url}/signup`, {\r\n    headers: this._headers,\r\n    method: 'POST',\r\n    credentials: 'include',\r\n    body: JSON.stringify({\r\n      password: `${password}`,\r\n      email: `${email}`,\r\n    }),\r\n  }).then((response) => this._checkResponse(response))\r\n\r\n  authorize(password, email) {\r\n    return fetch(`${this._url}/signin`, {\r\n      headers: this._headers,\r\n      method: 'POST',\r\n      credentials: 'include',\r\n      body: JSON.stringify({\r\n        password: `${password}`,\r\n        email: `${email}`,\r\n      }),\r\n    }).then((response) => this._checkResponse(response));\r\n  }\r\n\r\n  logout = () => fetch(`${this._url}/logout`, {\r\n    headers: this._headers,\r\n    credentials: 'include',\r\n  }).then((response) => this._checkResponse(response))\r\n}\r\n\r\nconst auth = new Auth(reqOptions);\r\n\r\nexport default auth;\r\n","/* eslint-disable no-undef */\r\n/* eslint-disable no-console */\r\nimport React, { useState, useEffect } from 'react';\r\nimport {\r\n  Route, Switch, useHistory, Redirect,\r\n} from 'react-router-dom';\r\nimport Register from './Register';\r\nimport InfoTooltip from './InfoTooltip';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport Login from './Login';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport ImagePopup from './ImagePopup';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport api from '../utils/api';\r\nimport auth from '../utils/auth';\r\nimport CurrentUserContext from '../contexts/CurrentUserContext';\r\n\r\nfunction App() {\r\n  const [currentUser, setCurrentUser] = useState({\r\n    name: '',\r\n    about: '',\r\n    avatar: '',\r\n    _id: '',\r\n  });\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isRemoveCardPopupOpen, setIsRemoveCardPopupOpen] = useState(false);\r\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState({});\r\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [userData, setUserData] = useState({\r\n    _id: '',\r\n    email: '',\r\n  });\r\n  const [message, setMessage] = useState({ text: '', type: '' });\r\n  const [isCardSending, setIsCardSending] = useState(false);\r\n  const [cardForDelete, setCardForDelete] = useState(null);\r\n\r\n  const [cards, setCards] = useState([]);\r\n\r\n  const history = useHistory();\r\n\r\n  const handleError = (error) => {\r\n    console.error(error);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (loggedIn) {\r\n      history.push('/');\r\n    }\r\n  }, [loggedIn]);\r\n\r\n  const handleRegister = ({ password, email }) => {\r\n    auth\r\n      .register(password, email)\r\n      .then((data) => {\r\n        const { _id, userEmail } = data;\r\n        setUserData({ _id, userEmail });\r\n\r\n        setIsInfoTooltipPopupOpen(true);\r\n        setMessage({\r\n          text: 'Вы успешно зарегистрировались!',\r\n          type: 'success',\r\n        });\r\n      })\r\n      .then(() => history.push('/'))\r\n      .catch((error) => {\r\n        handleError(error);\r\n        if (error) {\r\n          setIsInfoTooltipPopupOpen(true);\r\n          setMessage({\r\n            text: 'Что-то пошло не так! Попробуйте ещё раз.',\r\n            type: 'fail',\r\n          });\r\n        }\r\n      });\r\n  };\r\n\r\n  const handleLogin = ({ password, email }) => {\r\n    auth\r\n      .authorize(password, email)\r\n      .then((user) => {\r\n        setUserData({ email });\r\n        setCurrentUser(user);\r\n        setLoggedIn(true);\r\n      })\r\n      .catch(handleError);\r\n  };\r\n\r\n  const handleSignIn = () => {\r\n    history.push('/sign-in');\r\n  };\r\n\r\n  const handleSignUp = () => {\r\n    history.push('/sign-up');\r\n  };\r\n\r\n  useEffect(() => {\r\n    api\r\n      .getUserInfo()\r\n      .then((user) => {\r\n        setUserData({ email: user.email });\r\n        setCurrentUser(user);\r\n        setLoggedIn(true);\r\n      })\r\n      .catch((err) => {\r\n        console.log('Ошибка при загрузке информации пользователя', err.message);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (loggedIn) {\r\n      api\r\n        .getInitialCards()\r\n        .then((data) => {\r\n          setCards(data.reverse());\r\n        })\r\n        .catch((err) => {\r\n          console.log('Ошибка при загрузке карточек', err.message);\r\n        });\r\n    }\r\n  }, [loggedIn]);\r\n\r\n  const handleLogout = () => {\r\n    auth\r\n      .logout()\r\n      .then(() => {\r\n        history.push('/sign-in');\r\n        setLoggedIn(false);\r\n        setCurrentUser({\r\n          name: '',\r\n          about: '',\r\n          avatar: '',\r\n          _id: '',\r\n        });\r\n      });\r\n  };\r\n\r\n  const handleEditAvatarClick = () => {\r\n    setIsEditAvatarPopupOpen(true);\r\n  };\r\n\r\n  const handleEditProfileClick = () => {\r\n    setIsEditProfilePopupOpen(true);\r\n  };\r\n\r\n  const handleAddPlaceClick = () => {\r\n    setIsAddPlacePopupOpen(true);\r\n  };\r\n\r\n  const handleCardDeleteRequest = (card) => {\r\n    setCardForDelete(card);\r\n    setIsRemoveCardPopupOpen(true);\r\n  };\r\n\r\n  const closeAllPopups = () => {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsRemoveCardPopupOpen(false);\r\n    setIsImagePopupOpen(false);\r\n    setIsInfoTooltipPopupOpen(false);\r\n    setCardForDelete(undefined);\r\n  };\r\n\r\n  const handleCardClick = (card) => {\r\n    setSelectedCard(card);\r\n    setIsImagePopupOpen(true);\r\n  };\r\n\r\n  const [isUserSending, setIsUserSending] = useState(false);\r\n  const handleUpdateUser = (newProfileData) => {\r\n    setIsUserSending(true);\r\n    api\r\n      .setUserInfo(newProfileData)\r\n      .then((user) => {\r\n        setCurrentUser(user);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(\r\n          'Ошибка при загрузке новой информации пользователя',\r\n          err.message,\r\n        );\r\n      })\r\n      .finally(() => setIsUserSending(false));\r\n  };\r\n\r\n  const handleUpdateAvatar = (link) => {\r\n    api\r\n      .setUserAvatar(link)\r\n      .then((user) => {\r\n        setCurrentUser(user);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log('Ошибка при загрузке аватара пользователя', err.message);\r\n      });\r\n  };\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some((i) => i === currentUser._id);\r\n\r\n    (!isLiked ? api.addLike(card._id) : api.deleteLike(card._id))\r\n      .then((newCard) => {\r\n        setCards((state) => state.map((c) => (c._id === card._id ? newCard : c)));\r\n      })\r\n      .catch((err) => {\r\n        console.log('Ошибка при постановке лайка', err.message);\r\n      });\r\n  }\r\n\r\n  function handleCardDelete(evt) {\r\n    evt.preventDefault();\r\n    api\r\n      .handleDeleteCard(cardForDelete._id)\r\n      .then(() => {\r\n        setCards((state) => state.filter((c) => c._id !== cardForDelete._id));\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log('Ошибка при удалении карточки', err.message);\r\n      });\r\n  }\r\n\r\n  function handleAddPlace(card) {\r\n    setIsCardSending(true);\r\n    api\r\n      .addNewCard(card)\r\n      .then((newCard) => {\r\n        setCards((allCards) => [newCard, ...allCards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log('Ошибка при загрузке нового места', err.message);\r\n      })\r\n      .finally(() => setIsCardSending(false));\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"App\">\r\n        <div className=\"page__container\">\r\n          <Switch>\r\n            <Route path=\"/sign-up\">\r\n              {loggedIn && <Redirect to=\"/\" />}\r\n              <Register\r\n                handleRegister={handleRegister}\r\n                loggedIn={loggedIn}\r\n                handleSignIn={handleSignIn}\r\n              />\r\n            </Route>\r\n            <Route path=\"/sign-in\">\r\n              {loggedIn && <Redirect to=\"/\" />}\r\n              <Login handleLogin={handleLogin} handleSignUp={handleSignUp} />\r\n            </Route>\r\n            <ProtectedRoute\r\n              path=\"/\"\r\n              loggedIn={loggedIn}\r\n              component={Main}\r\n              onAddPlace={handleAddPlaceClick}\r\n              onEditProfile={handleEditProfileClick}\r\n              onEditAvatar={handleEditAvatarClick}\r\n              onCardClick={handleCardClick}\r\n              cards={cards}\r\n              onCardLike={handleCardLike}\r\n              onCardDelete={handleCardDeleteRequest}\r\n              handleLogout={handleLogout}\r\n              email={userData.email}\r\n            />\r\n          </Switch>\r\n          <Footer />\r\n        </div>\r\n\r\n        <InfoTooltip\r\n          isOpen={isInfoTooltipPopupOpen}\r\n          onClose={closeAllPopups}\r\n          message={message}\r\n        />\r\n        <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateUser={handleUpdateUser}\r\n          isSending={isUserSending}\r\n        />\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onAddPlace={handleAddPlace}\r\n          isSending={isCardSending}\r\n        />\r\n        <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n        />\r\n        <PopupWithForm\r\n          title=\"Вы уверены?\"\r\n          name=\"delete\"\r\n          submitButtonTitle=\"Да\"\r\n          isOpen={isRemoveCardPopupOpen}\r\n          onSubmit={handleCardDelete}\r\n          onClose={closeAllPopups}\r\n        />\r\n        <ImagePopup\r\n          card={selectedCard}\r\n          isOpen={isImagePopupOpen}\r\n          onClose={closeAllPopups}\r\n        />\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = (onPerfEntry) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({\r\n      getCLS, getFID, getFCP, getLCP, getTTFB,\r\n    }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","/* eslint-disable no-undef */\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}